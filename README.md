# Election_Stats

Δημιουργία εκτελέσιμου:

Η δημιουργία του εκτελέσιμου γίνεται με την κληση της εντολής make η οποία δημιουργεί το runelection ,η διαγραφή του οποίου γίνεται με την clean, χάρη στο makefile που υπάρχει στο φάκελο.

Κλήση εφαρμογής:

Η εφαρμογή καλείται με την εξής εντολή
./runelection -i inputfile -o outfile -n numofupdates
τα μέλη της οποίας μπορούν να δωθούν με οποιαδήποτε σειρά αρκεί να βρίσκονται μετά το αντίστοιχο flag . Το iputfile είναι το μοναδικό στοιχείο που απαιτείται η εισαγωγή του και σε αντίθετη περίπτωση εμφανίζει καταλληλο μήνυμα λάθους και το πρόγραμμα τερματίζει. Αντίθετα αν δεν δωθεί κάποιο συγκεκριμένο αρχείο εξόδου αυτή γίνεται στο output.txt, αντίστοιχα και για το numofupdates το οποίο είναι 5 by default , αν δεν δωθεί άλλος αριθμός. Τα αρχεία εισόδου σύμφωνα με τα οποία σχεδιάστηκε η εφαρμογή είναι τύπου .csv .

 
Δομές που χρησιμοποιήθηκαν:

Η δομές που χρησιμοποιήθηκαν αποτελούνται απο ένα bloom filter , ένα red black tree και μία λίστα από λίστες η οποία αποτελεί τη 3η δομή της εκφώνησης και εμφανίζει πολυπλοκότητα Ο(n).

Bloom Filter
Αποτελείται από bit array με ν θέσεις όπου ν ο πρώτος πρώτος αριθμός μετά το τριπλάσιο των εισαγωγών που γίνονται κατά την εκκίνηση της εφαρμογής. Το bloom filter αναδημιουργείται καθε φορά που γίνονται numofupdates νέες εισαγωγές. Η πηγή πάνω στην οποια βασίστηκαν οι #define εντολές για εισαγωγή, διαγραφή και αναζήτηση στο bloom filter είναι η πρώτη απάντηση στη παρακάτω διεύθυνση:
https://stackoverflow.com/questions/2525310/how-to-define-and-work-with-an-array-of-bits-in-c?fbclid=IwAR3tBsm8ot-8yoxrCSC6y0eoL_2nWwYizsoAB-0Zg18xUghwOyqV62RTaME
Καθε 8 θεσεις του bit array αντιστοιχουν σε εναν int.


Red Black Tree
Το RBTree που δημιούργησα βασίστηκε ως προς την δημιουργία του και την αναζήτηση σε αυτό πάνω στο RBTree που υπάρχει στην εξής διεύθυνση:
https://www.geeksforgeeks.org/red-black-tree-set-3-delete-2/

Επιπλέον δημιουργήθηκαν οι συναρτήσεις …

	bool search2(char*);
		Επιστέφει 0 και 1 ανάλογα με το αν βρήκε ή οχι το key που της δόθηκε.
	void printNode(Node*,FILE*);
		Εκτυπώνει τα στοιχεία ενός κόμβου στο αρχείο.
	void vote(Node*);
		Αλλάζει το πεδίο has_voted του κόμβου.
	void hasVoted(int*);
	void hasVotedHelp(Node*,int*);
		Ελέγχουν αναδρομικά πόσοι έχουν ψηφίσει.
	void hasVotedwPC(int*,int);
	void hasVotedwPCHelp(Node*,int*,int);
		Ελέγχουν αναδρομικά πόσοι έχουν ψηφίσει για το δοσμένο postal code .
	void deletelist();
	void deletelistHelp(Node*);
		Διαγράφει αναδρομικά όλους τους κόμβους του δέντρου, λειτουργώντας ουσιαστικά ως ένας destructor .
	void renewBloom(BloomFilter*);
	void renewBloomHelp(BloomFilter*,Node* x);
		Αναδημιουργεί το bloom filter εισάγωντας τα  keys που διαβάζει αναδρομικά από το red black tree .

Ενώ τροποποίησα τις insert , delete και search  ώστε να εξυπηρετούν την εισαγωγή και διαγραφή κόμβων με key της μορφής char*.
Τέλος όλες οι συναρτήσεις τροποποιήθηκαν ώστε να μπορούν να τυπώνουν τα αποτελέσματα τους στο επιλεγμένο output file.

3η Δομή→ Μια λίστα από λίστες

Ως 3η δομή χρησιμοποίησα μια μονά συνδεδεμένη λίστα της οποίας κάθε κόμβος περιέχει το αντίστοιχο postal code, τον αριθμό των
μελών της εσωτερικής λίστας, τον αριθμό των μελών της εωτερικής λίστας που έχουν ψηφίσει (ανανεώνεται μέσω συνάρτησης κάθε 
φορά που χρειάζεται) και έναν δείκτη στον πρώτο κόμβο της εσωτερικής λίστας, η  οποία με τη σειρά της περιλαμβάνει το id του 
ψηφοφόρου με αυτό το postal code και έναν δείκτη στον επόμενο ψηφοφόρο. Για την εισαγωγή ενός ατόμου γίνεται πρώτα αναζήτηση 
για να βρεθεί ο κόμβος με το σωστό postal code  αν βρεθεί προστίθεται στο τέλος της λίστας των ψηφοφόρων με το ίδιο postal, 
αλλιώς δημιουργείται ένας νέος κόμβος-pc και αυτός γίνεται ο πρώτος στην εσωτερική λίστα.


Hash Functions

Το 1ο ειναι ειναι αρκετα απλό και επιστρέφει το υπόλοιπο της διαίρεσης του id με το μέγεθος του bloom filter

Το 2ο είναι μια παραλλαγή του hash function sdbm που βρήκα στο παρακάτω σύνδεσμο:
http://www.cs.yorku.ca/~oz/hash.html

Τέλος, το 3ο είναι ένας συνδύασμος των 2 πρώτων και μίας τιμής i που δίνεται απ το χρήστη.

Παραδοχες συναρτησεων
-Στην εντολη ins εισαγεται και το φυλο του ατομου, επιπλεον απο αυτα που ζητειται στον ορισμο της ins, πχ ins ZZ999999 
SERAFIM LENTAS 45677  M 20, η σειρα υπαρχει και στο help εντος της εφαρμογης.
-Αν γινει load αρχειο που δεν υπαρχει ζητειται απ τον χρηστη να εισαγει ξανα την εντολη και εμφανιζει καταλληλο μηνυμα.
-Με την κληση της exit εμφανιζονται στατιστικα για καθε postal code και διαγραφονται οι δομες.

Αρχεια εξοδου 
-Με την κληση της exit δημιουργειται στο output ενα registry που περιλαμβανει τις παλιες και νεες καταχωρησεις στο αρχειο 
ψηφοφορων, το οποιο περιλαμβανει και την πληροφορια για το αν ψηφισαν. Το αρχειο αυτο μπορει να χρησιμοποιηθει ξανα ως 
εισαγωγη στην εφαρμογη με ολες τις εγγραφες να εχουν has_voted ξανα 0.
Αν δεν δηλωθει συγκεκριμενο ονομα γινεται εξοδος στο output.txt.
-Ολα τα μηνυματα λαθους εμφανιζονται στο terminal.
